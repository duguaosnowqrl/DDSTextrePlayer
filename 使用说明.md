# TexturePacker 动画播放器使用说明

## 项目概述

这是一个基于 Maven 和 Swing 技术开发的动画播放器，专门用于播放 TexturePacker 打包后的资源文件。项目成功解析了提供的 `attack.plist` 文件，并实现了动画播放功能。

## 已实现的功能

### 1. 核心功能
- ✅ **PList 文件解析**: 成功解析 TexturePacker 生成的 plist 配置文件
- ✅ **DDS 图像支持**: 实现了基础的 DDS 文件加载（包含备用方案）
- ✅ **动画播放**: 支持播放、暂停、停止控制
- ✅ **速度调节**: 可调节动画播放速度（10-500ms/帧）
- ✅ **帧信息显示**: 实时显示当前帧数和帧详细信息

### 2. 技术特性
- ✅ **旋转帧支持**: 正确处理 TexturePacker 中的旋转帧
- ✅ **自适应缩放**: 动画自动缩放以适应显示窗口
- ✅ **偏移处理**: 支持帧偏移的正确显示
- ✅ **Java 8 兼容**: 完全兼容 Java 8 环境

## 项目结构

```
plist-test/
├── pom.xml                           # Maven 配置
├── attack.dds                        # DDS 纹理文件
├── attack.plist                      # 动画配置文件（13帧）
├── README.md                         # 详细文档
├── 使用说明.md                       # 中文使用说明
└── src/main/java/com/example/
    ├── AnimationPlayer.java          # 主应用程序（GUI界面）
    ├── PListParser.java              # PList 解析器
    └── DDSImageLoader.java           # DDS 图像加载器
```

## 运行方法

### 方法一：使用 Maven 直接运行
```bash
mvn exec:java
```

### 方法二：编译后运行
```bash
mvn clean compile
mvn exec:java -Dexec.mainClass="com.example.AnimationPlayer"
```

## 界面说明

### 主界面布局
- **顶部信息栏**: 显示当前帧数和播放状态
- **中央显示区**: 黑色背景的动画播放区域
- **底部控制栏**: 播放控制按钮和速度调节滑块

### 控制按钮
- **播放**: 开始播放动画循环
- **暂停**: 暂停当前播放
- **停止**: 停止播放并回到第一帧
- **速度滑块**: 调整播放间隔（10-500毫秒）

### 显示信息
- **帧计数**: 显示 "帧: X/13" 格式
- **播放状态**: 显示当前播放状态
- **帧详情**: 在动画区域显示当前帧的尺寸和旋转信息

## 动画数据分析

根据解析的 `attack.plist` 文件，动画包含以下信息：

- **总帧数**: 13帧（0000-0012）
- **纹理尺寸**: 1364x124 像素
- **像素格式**: RGBA8888
- **帧特性**: 部分帧包含旋转变换
- **源尺寸**: 统一为 118x132 像素

## 技术实现亮点

### 1. PList 解析
- 使用 DOM 解析器处理 XML 格式
- 智能解析坐标字符串（如 "{{x,y},{w,h}}"）
- 支持旋转标志和偏移量处理

### 2. DDS 处理
- 实现了 DDS 文件头解析
- 提供多种备用方案确保程序稳定运行
- 当 DDS 加载失败时自动生成测试图像

### 3. 动画渲染
- 使用 Swing Timer 实现平滑动画
- 支持图像旋转变换
- 自适应缩放和居中显示

## 运行结果

程序成功启动后会显示：
- GUI 窗口标题："TexturePacker 动画播放器"
- 状态信息：显示 DDS 加载状态
- 可操作的播放控制界面
- 13帧动画的循环播放

## 扩展建议

1. **格式支持**: 添加 PNG、JPG 等常见图像格式支持
2. **压缩格式**: 完善 DXT1/DXT3/DXT5 等 DDS 压缩格式支持
3. **导出功能**: 添加动画导出为 GIF 的功能
4. **批量处理**: 支持同时加载多个动画文件
5. **性能优化**: 添加帧缓存机制提升播放性能

## 总结

项目成功实现了 TexturePacker 动画播放器的核心功能，能够正确解析和播放提供的测试资源。代码结构清晰，具有良好的扩展性，为后续功能增强提供了坚实的基础。